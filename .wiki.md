# Project Summary
The project is an advanced web application designed to monitor and analyze extractive activities in the Puglia region of Italy. It aims to enhance transparency and facilitate data-driven decision-making within the extractive sector. By providing dynamic visualizations and insights into authorized caves, it serves as a crucial tool for stakeholders such as government agencies, environmental organizations, and industry professionals. Users can input data manually or upload simplified Excel files, streamlining data management.

# Project Module Description
The project consists of the following functional modules:
- **Authentication**: Secure login for administrative access.
- **Data Input**: Forms for manual entry and simplified Excel file uploads for cave data.
- **Data Visualization**: Interactive charts and dashboards showing statistics on authorized caves by year, province, and material.
- **AI Commentary**: Automated analysis and commentary generation based on cave data using DeepSeek v3.2.
- **Data Export**: Export functionality for charts and tables in Excel format.
- **Data Reset**: Ability to reset data for specific years and sections.
- **Dynamic Management**: Configurable management of provinces, materials, price materials, and foreign destinations.
- **Authorized Caves**: Module for data entry, including forms for adding cave data and bulk uploads.
- **Regional Revenue**: New module for tracking annual revenue from mining activity fees, including data entry and visualization.

# Directory Tree
```
app/
├── backend/
│   ├── core/                  # Core functionalities like authentication and database management
│   ├── data_models/           # JSON data models for caves and regional revenue
│   ├── dependencies/          # Dependency management and configurations
│   ├── main.py                # Main entry point for the backend application
│   ├── routers/               # API routes for various functionalities
│   ├── services/              # Service layer for business logic
│   └── utils/                 # Utility functions
└── frontend/
    ├── dist/                  # Compiled frontend assets
    ├── src/                   # Source code for the frontend application
    ├── public/                # Public assets
    ├── index.html             # Main HTML file
    └── package.json           # Dependency management for the frontend
```

# File Description Inventory
- **backend/**: Contains server-side code, including API routes, database interactions, and business logic.
- **frontend/**: Contains client-side code, including components, pages, and assets for the web application.

# Technology Stack
- **Frontend**: React, Shadcn-UI, Recharts
- **Backend**: FastAPI, SQLAlchemy, Atoms Backend (for database and authentication)
- **AI**: DeepSeek v3.2 for automated commentary generation
- **Excel Parsing**: xlsx library for handling Excel files

# Usage
1. **Install Dependencies**:
   - Navigate to the backend directory and install dependencies using the appropriate package manager.
   - Navigate to the frontend directory and run `pnpm install` to install frontend dependencies.

2. **Build and Run**:
   - Build the frontend application with `pnpm run build`.
   - Start the backend server to ensure it is running.

3. **Access the Application**:
   - Open the application in a web browser. Use the provided login page to access the administrative features.

4. **Using the Excel Upload**:
   - Prepare the Excel file with only authorized caves and 5 essential columns: Numero Fascicolo, Comune, Provincia, Stato Cava, Materiale.
   - Access the admin area after logging in.
   - Upload the prepared Excel file. The system will read all rows, delete old data for that year, and insert new records.

5. **Regional Revenue Module**:
   - Navigate to the "Incassi Regionali" section in the admin dashboard to enter annual revenue data.
   - Input the year and revenue amount in euros, and submit to save the data.
